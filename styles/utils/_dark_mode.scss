// ==============================================
//               üåô DARK MODE
// ==============================================

// --- Paletas de Cores ---
:root {
  // Paleta - Modo Claro
  --bg-light: #f0f3f8;
  --text-light: #000000;
  --session-bg-light: #f0f3f8;
  --shadow-dark-light: #c8d0e7;
  --shadow-light-light: #ffffff;
  --toggle-bg-light: #000000;
  --slider-bg-light: #ffffff;
  --track-bg-light: #ffffff;
  --thumb-bg-light: #000000;

  // Paleta - Modo Escuro
  --bg-dark: #2d3748;
  --text-dark: #ffffff;
  --session-bg-dark: #2d3748;
  --shadow-dark-dark: #1a202c;
  --shadow-light-dark: #4a5568;
  --toggle-bg-dark: #ffffff;
  --slider-bg-dark: #000000;
  --track-bg-dark: #000000;
  --thumb-bg-dark: #ffffff;

  // --- Vari√°veis de transi√ß√£o img claro ---
  --serenatto-img-light: url("../assets/img/serenatto-cafe.png");
  --text-serenatto-light: #462e09;

  // --- Vari√°veis de transi√ß√£o img escuro ---
  --serenatto-img-dark: url("../assets/img/serenatto-cafe-escuro.png");
  --text-serenatto-dark: #b29463;

  // --- Vari√°veis Sem√¢nticas (Padr√£o Modo Claro) ---
  --bg-color: var(--bg-light);
  --text-color: var(--text-light);
  --session-color: var(--session-bg-light);
  --shadow-dark: var(--shadow-dark-light);
  --shadow-light: var(--shadow-light-light);
  --toggle-color: var(--toggle-bg-light);
  --slider-bg-color: var(--slider-bg-light);
  --track-bg-color: var(--track-bg-light);
  --thumb-bg-color: var(--thumb-bg-light);
  --serenatto-img: var(--serenatto-img-light);
  --text-serenatto: var(--text-serenatto-light);

  // Configura√ß√µes globais
  color-scheme: light;
  --x: 50%;
  --y: 50%;
}

// --- Ativa√ß√£o do Modo Escuro ---
html.dark {
  color-scheme: dark;

  // Atribui a paleta escura √†s vari√°veis sem√¢nticas
  --bg-color: var(--bg-dark);
  --text-color: var(--text-dark);
  --session-color: var(--session-bg-dark);
  --shadow-dark: var(--shadow-dark-dark);
  --shadow-light: var(--shadow-light-dark);
  --toggle-color: var(--toggle-bg-dark);
  --slider-bg-color: var(--slider-bg-dark);
  --track-bg-color: var(--track-bg-dark);
  --thumb-bg-color: var(--thumb-bg-dark);
  --serenatto-img: var(--serenatto-img-dark);
  --text-serenatto: var(--text-serenatto-dark);
}

// --- Estilos Globais Baseados no Tema ---
body {
  transition: background-color 0.3s ease, color 0.3s ease;
  background-color: var(--bg-color);
  color: var(--text-color);
}

// ==============================================
// üé® DARK MODE APLICA√á√ïES
// ==============================================

html.dark {
  // --- Tipografia ---
  h1, h2, h3, h4, h5, h6, .logo, a {
    color: var(--text-color);
  }

  // --- SVGs e √≠cones ---
  svg {
    fill: var(--text-color);
    color: var(--text-color);

    path {
      fill: var(--text-color);
    }
  }
}

// ==============================================
// ‚ú® ANIMA√á√ïES DE TRANSI√á√ÉO
// ==============================================

@keyframes reveal-in {
  from {
    clip-path: circle(0% at var(--x) var(--y));
  }
  to {
    clip-path: circle(150% at var(--x) var(--y));
  }
}

@keyframes reveal-out {
  from {
    clip-path: circle(150% at var(--x) var(--y));
  }
  to {
    clip-path: circle(0% at var(--x) var(--y));
  }
}

// --- View Transition API ---
::view-transition-new(root) {
  animation: reveal-in 0.5s ease-in-out forwards;
  z-index: 1;
  mix-blend-mode: normal;
}

::view-transition-old(root) {
  animation: reveal-out 0.5s ease-in-out forwards;
  animation-delay: 0.5s;
  z-index: 0;
  mix-blend-mode: normal;
}

::view-transition-image-pair(root) {
  isolation: isolate;
}

// ==============================================
// üîò TOGGLE SWITCH COMPONENT
// ==============================================

.toggle {
  position: static;
  transform: scale(0.8);
  cursor: pointer;
  z-index: 10;
  margin: 0;

  // --- Input oculto ---
  input {
    display: none;

    // --- C√≠rculo principal ---
    + div {
      border-radius: 50%;
      width: 36px;
      height: 36px;
      position: relative;
      box-shadow: inset 16px -16px 0 0 var(--toggle-color);
      transform: scale(1) rotate(-2deg);
      transition: box-shadow 0.5s ease 0s, transform 0.4s ease 0.1s;

      // --- Fundo do toggle ---
      &::before {
        content: "";
        width: inherit;
        height: inherit;
        border-radius: inherit;
        position: absolute;
        left: 0;
        top: 0;
        background: light-dark(transparent, var(--toggle-color));
        transition: background 0.3s ease;
      }

      // --- Estrelas/raios do sol ---
      &::after {
        content: "";
        width: 8px;
        height: 8px;
        border-radius: 50%;
        margin: -4px 0 0 -4px;
        position: absolute;
        top: 50%;
        left: 50%;
        box-shadow: 0 -23px 0 var(--toggle-color), 0 23px 0 var(--toggle-color),
          23px 0 0 var(--toggle-color), -23px 0 0 var(--toggle-color),
          15px 15px 0 var(--toggle-color), -15px 15px 0 var(--toggle-color),
          15px -15px 0 var(--toggle-color), -15px -15px 0 var(--toggle-color);
        transform: scale(0);
        transition: all 0.3s ease;
      }
    }

    // --- Estado ativo (checked) ---
    &:checked + div {
      box-shadow: inset 32px -32px 0 0 var(--bg-color);
      transform: scale(0.5) rotate(0deg);
      transition: transform 0.3s ease 0.1s, box-shadow 0.2s ease 0s;

      &::before {
        background: var(--toggle-color);
        transition: background 0.3s ease 0.1s;
      }

      &::after {
        transform: scale(1.5);
        transition: transform 0.5s ease 0.15s;
      }
    }
  }
}